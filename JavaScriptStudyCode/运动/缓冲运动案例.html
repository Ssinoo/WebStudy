<!DOCTYPE html>
<html lang="en">

<head>
  <meta charset="UTF-8">
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>缓冲运动-菜单</title>
  <style>
    * {
      margin: 0;
      padding: 0;

    }

    #div1 {
      width: 100px;
      height: 100px;
      background-color: red;
      position: absolute;
      right: 0;
    }
  </style>
</head>

<body style="height: 3000px;">
  <div id='div1'></div>

  <script>
    var oDiv = document.getElementById('div1')

    //滚动条高
    var scrollTop = document.documentElement.scrollTop
    //浏览器高
    var windowHeight = document.documentElement.clientHeight
    //获取居中值
    var ih = parseInt(scrollTop + (windowHeight - oDiv.offsetHeight) / 2)
    startMove(ih)
    console.log(oDiv.offsetHeight);
    console.log(oDiv.offsetTop);

    console.log('scrollTop:' + scrollTop + ' wiHet:' + windowHeight + ' ih:' + ih);

   

    var timer = null;
    function startMove(iTarget) {
      clearInterval(timer);
      timer = setInterval(() => {
        //计算速度，
        var speed = (iTarget - oDiv.offsetTop) / 8
        speed = speed > 0 ? Math.ceil(speed) : Math.floor(speed)
        if (oDiv.offsetTop == iTarget) {
          clearInterval(timer)
        } else {
          oDiv.style.top = oDiv.offsetTop + speed + 'px';
        }
      }, 30);
    }

    window.onscroll = function () {
      //滚动条高
      var scrollTop = document.documentElement.scrollTop
      //浏览器高
      var windowHeight = document.documentElement.clientHeight
      //获取居中值
      var ih = parseInt(scrollTop + (windowHeight - oDiv.offsetHeight) / 2)
      startMove(ih)
    }
  </script>
</body>

</html>